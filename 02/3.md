## 2.3 变量

- 变量声明方式：
- 1. var声明方式:
    - 格式：```var <name> [type] [=value]```
    - 解析：
        1. name: 变量名
        2. type: 变量类型
        3. =: 等号
        4. value: 变量值。
    - 其中类型和值二者可以省略一个。
        - 省略类型的时候，会从值推导出变量的类型。
        - 省略值的时候，会使用类型的零值初始化，
            - 其中整型为0，布尔为false，字符串为空串。结构体类型则为各个字段的零值。引用类型为空，包括slice/map/chan等。
            - 这样做的意义，防止未经定义的变量出现未定义的行为，避免了像c/c++等的未初始化变量的未定义的行为。
    - 示例:
        ```go
        var s string // s 被初始化为空字符串""
        var i, j, k int // i/j/k为变量列表，都是int类型，初始化为0
        var b, f, s = true, 2.3, "four" // b/f/s为变量列表，类型不同，分别推导为：bool/float64/string

        type A struct {
            s []int
            m map[int]string
            c chan int
            b B
        }

        type B struct {
            a int
            b string
        }

        var a A // a为A类型，其中引用类型用nil初始化，b为结构体类型，则会递归初始化B内部的元素。
        ```
    - 初始化时机：
        - 包级别的变量，在main函数执行前初始化。
        - 局部变量初始化和声明都在函数执行期间进行。
        - 变量可以通过函数返回值进行初始化。
        ```go
        var f, err = os.Open(name) // os.Open()返回一个文件和一个错误
        ```

### 2.3.1 短变量声明

- 在函数中，一种称作短变量声明的可选形式可以用来声明和初始化局部变量。采用的格式：
    - 格式: name := expression
    - name的类型由表达式的类型决定。
- 特点：
    - 短小、灵活，故在局部变量色声明和初始化中主要使用它。
    - var声明(局部变量)
        - 通常是为那些初始化表达式类型不一致的局部变量保留的。
        - 或者用于后面才对变量赋值
        - 以及变量初始值不重要的情况。
        - 示例:
        ```go
        func hello() {
            i := 100
            var boiling float64 = 100 // 100为整型，而boiling为float64，这种情况必须使用var形式。
            var names []string // 后面才对变量赋值。
            var err error // 初始值不重要。
            ...
            names = append(names, "hello")
            err = fmt.Errorf("hello, world")
        }
        ```
- 声明和初始化也可以用多个变量列表的方式声明并初始化:
    ```go
    i, j := 0, 1
    ```
    - 只在当它们对于可读性有帮助的时候才使用多个初始化表达式进行变量声明，如for循环初始化。
- 声明为(:=)，赋值为(=)
- 和var一样，也可以用函数返回值来声明：
    ```go
    f, err := os.Open(name)
    ```
- ***注意***: 短变量声明不需要声明所有左边的变量。如果一些变量在作用域内之前已经声明过了，那么对于这些变量短声明等价于赋值。
    ```go
    in, err := os.Open(inFile)
    //...
    out, err := os.Open(outFile) // 其中err在之前已经声明过了，这里等同于赋值。
    ```
    - 短变量声明至少声明一个变量，否则无法通过编译。
    - ???
### 2.3.2 指针
